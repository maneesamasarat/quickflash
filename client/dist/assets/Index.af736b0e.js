import{r as c,o as r,j as l,f as s,h as n,t as o,g as a,w as _,m as b,d as D,k as y,q as R,F as g}from"./vendor.9a0731a0.js";import{B as x}from"./Base.ebed360e.js";import{D as B,f as $}from"./date.8518464d.js";import{_ as k,A as C}from"./index.5636f22e.js";import{D as I}from"./DynamicContent.17061b9b.js";const N={props:["deck","review"],components:{DeckIcon:B},methods:{fromNow:$,handleReviewDelete(){this.$store.dispatch("deleteReview",{deckId:this.deck.id,reviewId:this.review.id})}}},V={class:"card"},T={class:"card-body pb-4"},A={class:"d-flex align-items-center"},S={class:"mb-4"},F=s("br",null,null,-1),j=n("View report");function q(t,m,e,u,i,d){const h=c("DeckIcon"),v=c("router-link");return r(),l("div",V,[s("div",T,[s("h3",A,[n(o(e.deck.name)+" ",1),a(h,{score:e.review.score_percent},null,8,["score"])]),s("p",S,[n(" Taken "+o(d.fromNow(e.review.taken_at))+" ago ",1),F,n(" Scored "+o(e.review.score)+"/"+o(e.deck.max_score)+" ("+o(e.review.score_percent)+"%) ",1)]),a(v,{class:"btn btn-secondary btn-sm me-1",to:{name:"decks.reviews.show",params:{deck_id:e.deck.id,review_id:e.review.id}}},{default:_(()=>[j]),_:1},8,["to"]),s("button",{class:"btn btn-outline-danger btn-sm",type:"button",onClick:m[0]||(m[0]=(...w)=>d.handleReviewDelete&&d.handleReviewDelete(...w))},"Delete")])])}var E=k(N,[["render",q]]);const L={components:{Base:x,Review:E,DynamicContent:I},data(){return{deck:{},reviews:[]}},computed:b(["title"]),created(){this.$store.commit("setTitle","Reviews"),this.fetchData(),this.$store.subscribeAction({after:t=>{t.type==="deleteReview"&&this.fetchData()}})},methods:{fetchData(){C.get(`decks/${this.$route.params.deck_id}/reviews`).then(t=>{this.loaded=!0,this.deck=t.deck,this.reviews=t.reviews,this.$store.commit("setTitle",`${this.deck.name} - Reviews`)}).catch(()=>{})}}},P={class:"mb-4"},z=s("i",{class:"bi bi-plus"},null,-1),G=n(" Review now "),H={class:"row"},J={key:0,class:"col"},K={class:"col-12 col-md-6 col-xl-4"};function M(t,m,e,u,i,d){const h=c("router-link"),v=c("Review"),w=c("DynamicContent"),f=c("Base");return r(),D(f,null,{default:_(()=>[s("h2",P,[n(o(t.title)+" ",1),a(h,{to:{name:"decks.reviews.create",params:{deck_id:i.deck.id}},class:"btn btn-outline-secondary btn-sm ms-3"},{default:_(()=>[z,G]),_:1},8,["to"])]),a(w,{loaded:t.loaded},{default:_(()=>[s("div",H,[i.reviews.length?y("",!0):(r(),l("div",J,"No reviews for this deck yet.")),(r(!0),l(g,null,R(i.reviews,p=>(r(),l("div",K,[a(v,{deck:i.deck,review:p},null,8,["deck","review"])]))),256))])]),_:1},8,["loaded"])]),_:1})}var Y=k(L,[["render",M]]);export{Y as default};
