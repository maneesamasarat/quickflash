import{c as w,a as v,b as k,r as y,o as z,d as j,e as q}from"./vendor.9a0731a0.js";const _=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}};_();const L="modulepreload",u={},M="/",f=function(e,r){return!r||r.length===0?e():Promise.all(r.map(n=>{if(n=`${M}${n}`,n in u)return;u[n]=!0;const o=n.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const a=document.createElement("link");if(a.rel=o?"stylesheet":L,o||(a.as="script",a.crossOrigin=""),a.href=n,document.head.appendChild(a),o)return new Promise((s,b)=>{a.addEventListener("load",s),a.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())},E=[{path:"/login",name:"auth.login",component:()=>f(()=>import("./Login.332550bf.js"),["assets/Login.332550bf.js","assets/Auth.688fe8a5.js","assets/Auth.0783e63b.css","assets/vendor.9a0731a0.js"])},{path:"/register",name:"auth.register",component:()=>f(()=>import("./Register.b0940b63.js"),["assets/Register.b0940b63.js","assets/Auth.688fe8a5.js","assets/Auth.0783e63b.css","assets/vendor.9a0731a0.js"])},{path:"/",name:"dashboard",component:()=>f(()=>import("./Dashboard.0fc6fa84.js"),["assets/Dashboard.0fc6fa84.js","assets/Base.ebed360e.js","assets/Base.49e1949d.css","assets/vendor.9a0731a0.js","assets/DeckBase.f9a3022a.js","assets/date.8518464d.js","assets/DynamicContent.17061b9b.js"])},{path:"/decks",name:"decks.index",component:()=>f(()=>import("./Index.48cdad84.js"),["assets/Index.48cdad84.js","assets/Base.ebed360e.js","assets/Base.49e1949d.css","assets/vendor.9a0731a0.js","assets/DeckBase.f9a3022a.js","assets/date.8518464d.js","assets/DynamicContent.17061b9b.js"])},{path:"/decks/:deck_id",name:"decks.show",component:()=>f(()=>import("./Show.7a0874dc.js"),["assets/Show.7a0874dc.js","assets/Base.ebed360e.js","assets/Base.49e1949d.css","assets/vendor.9a0731a0.js","assets/DeckForm.6cd1445a.js","assets/DynamicContent.17061b9b.js"])},{path:"/decks/create",name:"decks.create",component:()=>f(()=>import("./Create.2fe4ec32.js"),["assets/Create.2fe4ec32.js","assets/Base.ebed360e.js","assets/Base.49e1949d.css","assets/vendor.9a0731a0.js","assets/DeckForm.6cd1445a.js"])},{path:"/decks/:deck_id/reviews",name:"decks.reviews.index",component:()=>f(()=>import("./Index.af736b0e.js"),["assets/Index.af736b0e.js","assets/vendor.9a0731a0.js","assets/Base.ebed360e.js","assets/Base.49e1949d.css","assets/date.8518464d.js","assets/DynamicContent.17061b9b.js"])},{path:"/decks/:deck_id/reviews/:review_id",name:"decks.reviews.show",component:()=>f(()=>import("./Show.604418f5.js"),["assets/Show.604418f5.js","assets/Base.ebed360e.js","assets/Base.49e1949d.css","assets/vendor.9a0731a0.js","assets/date.8518464d.js","assets/DynamicContent.17061b9b.js"])},{path:"/decks/:deck_id/reviews/create",name:"decks.reviews.create",component:()=>f(()=>import("./Create.dc6d262e.js"),["assets/Create.dc6d262e.js","assets/Create.4143b074.css","assets/vendor.9a0731a0.js","assets/Base.ebed360e.js","assets/Base.49e1949d.css","assets/DynamicContent.17061b9b.js"])}],p=w({history:v("/"),routes:E}),x="/api";console.log(x);class g{static request(e,r,n,o=!0){var s;let i={};if(o){const b=(s=m.state.user)==null?void 0:s.token;i.Authorization=`Bearer ${b}`}const a=(b,d,l)=>{b.json().then(c=>{c.message&&m.commit("setMessage",c.message),d(c)}).catch(c=>{m.commit("setMessage","An error has occurred."),console.log("JSON parse error."),l(c)})};return new Promise((b,d)=>{fetch(`${x}/${r}`,{method:e,headers:i,body:n!=null?n:null}).then(l=>{l.ok?a(l,b,d):l.status===401?(m.dispatch("logout"),a(l,b,d)):a(l,d,d)}).catch(l=>{var c;m.commit("setMessage",(c=l.message)!=null?c:"An error has occurred."),console.log("Network error."),d(l)})})}static get(e,r){return this.request("GET",e,null,r)}static post(e,r,n){return this.request("POST",e,r,n)}static put(e,r,n){return this.request("PUT",e,r,n)}static delete(e,r){return this.request("DELETE",e,null,r)}}const h=()=>{var t;return JSON.parse((t=localStorage.getItem("user"))!=null?t:"{}")};var m=k({state(){return{title:"QuickFlash",message:null,user:h()}},getters:{user:h},actions:{login(t,e){t.commit("removeMessage"),t.commit("setUser",e),p.replace({name:"dashboard"})},async logout(t){t.commit("removeMessage"),await p.replace({name:"auth.login"}),t.commit("setUser",{}),t.commit("setMessage","Logged out successfully.")},async deleteDeck(t,e){!confirm("Are you sure you want to delete this deck?")||(await g.delete(`decks/${e}`),p.replace({name:"decks.index"}))},async exportDeck(t,e){await g.get(`decks/${e}/export`)},async deleteReview(t,{deckId:e,reviewId:r}){!confirm("Are you sure you want to delete this review?")||(await g.delete(`decks/${e}/reviews/${r}`),p.replace({name:"decks.reviews.index",params:{deck_id:e}}))}},mutations:{setTitle(t,e){document.title=`${e} - QuickFlash`,t.title=e},setMessage(t,e){t.message=e},removeMessage(t){t.message=null},setUser(t,e){t.user=e,localStorage.setItem("user",JSON.stringify(e))}}});var B=(t,e)=>{const r=t.__vccOpts||t;for(const[n,o]of e)r[n]=o;return r};const A={};function P(t,e,r,n,o,i){const a=y("router-view");return z(),j(a)}var S=B(A,[["render",P]]);q(S).use(p).use(m).mount("#app");export{g as A,B as _};
